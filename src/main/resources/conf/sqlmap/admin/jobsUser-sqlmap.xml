<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.v4java.workflow.dao.admin.JobsUserDao" >

  <resultMap id="jobsUser-resultMap" type="jobsUser" >

    <id 	column="id" 			property="id" 			jdbcType="INTEGER" />
    <result column="jobs_id" 		property="jobsId" 		jdbcType="INTEGER" />
    <result column="user_code" 		property="userCode" 	jdbcType="VARCHAR" />
    <result column="user_name" 		property="userName" 	jdbcType="VARCHAR" />
    <result column="status" 		property="status" 		jdbcType="INTEGER" />
    
    <result column="create_time" 	property="createTime" 	jdbcType="TIMESTAMP" />
    <result column="update_time" 	property="updateTime" 	jdbcType="TIMESTAMP" />
    <result column="system_id" 		property="systemId" 	jdbcType="INTEGER" />
    

  </resultMap>
  
  <resultMap id="jobsUserVO-resultMap" type="jobsUserVO" extends="jobsUser-resultMap">
 	 <result column="jobs_name" 		property="jobsName" 	jdbcType="VARCHAR" />
  </resultMap>
  
  	<insert id="batchInsertJobsUser" parameterType="list">
  		insert into jobs_user(
  				jobs_id,user_code,user_name,status ,system_id)
  		  values 
	    <foreach collection ="list" item ="item" index ="index" separator =","> 
	       	(#{item.jobsId}, #{item.userCode} ,#{item.userName},0,#{item.systemId}) 
	    </foreach>
    
  	</insert>

  
  <select id="findJobsUserVO" parameterType="jobsUserQuery" resultMap="jobsUserVO-resultMap">
		select 
				ju.id ,ju.jobs_id ,ju.user_code ,ju.user_name ,ju.status,
				ju.create_time ,ju.update_time 
		from
				jobs_user ju
		where
				ju.system_id = #{systemId}
		and
				ju.jobs_id = #{jobsId}	
		<if test="limit != null and offset != null">
			  	limit   #{offset} ,#{limit} 		
		</if>	
						  
  </select>


  <select id="findJobsUserVOCount" parameterType="jobsUserQuery" resultType="int">
		select 
				count(id)
		from
				jobs_user
		where
				system_id = #{systemId}	  
  </select>
  
</mapper>
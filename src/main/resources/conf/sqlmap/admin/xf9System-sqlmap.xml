<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.v4java.workflow.dao.admin.Xf9SystemDao" >

  <resultMap id="xf9System-resultMap" type="xf9System" >
    <id 		column="id" 				property="id" 				jdbcType="INTEGER" />
    <result column="name" 					property="name" 			jdbcType="VARCHAR" />
    <result column="description" 			property="description" 		jdbcType="VARCHAR" />
    <result column="status" 				property="status" 			jdbcType="INTEGER" />
    <result column="create_time" 			property="createTime" 		jdbcType="TIMESTAMP" />
    <!--  -->
    <result column="update_time" 			property="updateTime" 		jdbcType="TIMESTAMP" />
 	<result column="user_pwd" 				property="userPwd" 			jdbcType="VARCHAR" />
 	<result column="user_name" 				property="userName" 		jdbcType="VARCHAR" />
  	<result column="user_code" 				property="userCode" 		jdbcType="VARCHAR" />
  	<result column="system_code" 			property="systemCode" 		jdbcType="VARCHAR" />
  	
  </resultMap>
  
	<insert id="insertXf9System" parameterType="xf9System">
		insert into xf9_system(
			name,description,status,user_name,user_code,user_pwd,system_code
		)	
		values(#{name},#{description},0,#{userName},#{userCode},#{userPwd},{systemCode})
	</insert>	
	
	<update id="updateXf9System" parameterType="xf9System" >
		update  xf9_system
			<set>
				<if test="name != null and name != '' ">
					name = #{name}
				</if>			
				<if test="description != null and description != '' ">
					description = #{description}
				</if>		
				<if test="status != null ">
					status = #{status}
				</if>		
				<if test="userName != null and userName != '' ">
					user_name = #{userName}
				</if>					
				<if test="userPwd != null and userPwd != '' ">
					user_pwd = #{userPwd}
				</if>	
				<if test="userCode != null and userCode != '' ">
					user_code = #{userCode}
				</if>	
			</set>
				update_time = now()
		where  
				id = #{id}
	</update>	  

	<select id="findXf9SystemByUserCode" parameterType="string" resultMap="xf9System-resultMap">
			select
					id ,name,description,status,user_pwd,
					user_code,create_time,update_time,user_name,system_code
			from 
					xf9_system
			where		
					user_code = #{userCode}
	</select>
</mapper>